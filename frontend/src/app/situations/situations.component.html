<div id="header">
	<h1>Situations</h1>

	<a class="fas fa-cog cog" (click)="showSettings = true"></a>
	<div class="settings" [ngClass]="{ 'hidden': !showSettings }">
		<div>
			<input type="text" [(ngModel)]="email" />
			<button (click)="setEmail()" [ngClass]="{ 'disabled': settingsWorking }">OK</button>
		</div>
	</div>
</div>

<div class="row situation" *ngFor="let sit of situations" [ngClass]="{ 'active': sit.resolved === null }">
	<div>
		<span class="situation-type">{{ [ "Rig failure", "Unit failure" ][sit.type] }}</span>
		<span class="situation-unit">{{ sit.rig }}
			<span *ngIf="sit.type === 0"> Unit {{ sit.unit }}</span></span>
	</div>

	<div>
		<span class="situation-date">{{ moment(sit.time).format("LLL") }}</span>
		<span class="situation-resolved">{{ sit.resolved === null ? "Active" : "Resolved " + moment(sit.resolved).format("LLL") }}</span>
	</div>
</div>